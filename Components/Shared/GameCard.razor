@using BlazorNBADashboard.Models

<div class="card mb-2 game-card" @onclick="OnClick">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
            <div class="text-center" style="width: 40%;">
                <strong>@Game.VisitorTeam?.Abbreviation</strong>
                <h3>@Game.VisitorTeamScore</h3>
            </div>
            <div class="text-center">
                <span class="text-muted">@FormatStatus(Game.Status)</span>
            </div>
            <div class="text-center" style="width: 40%;">
                <strong>@Game.HomeTeam?.Abbreviation</strong>
                <h3>@Game.HomeTeamScore</h3>
            </div>
        </div>
        <div class="text-center mt-2">
            <small class="text-muted view-details">View Box Score →</small>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public GameData Game { get; set; } = new();

    [Parameter]
    public EventCallback OnClick { get; set; }

    private string FormatStatus(string status)
    {
        if (DateTime.TryParse(status, out var dateTime))
        {
            return dateTime.ToLocalTime().ToString("h:mm tt") + " EST";
        }
        return status;
    }
}